(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.ffc12d8d.svg"},function(e,t,a){e.exports=a.p+"static/media/superman.bc36d176.png"},function(e,t,a){e.exports=a.p+"static/media/flag.87f1c762.svg"},function(e,t,a){e.exports=a.p+"static/media/mine.9638be07.svg"},function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(5),c=a.n(s),r=(a(15),a(1)),l=a(3),o=a(2),u=(a(16),function(e,t){switch(t.type){case"CHANGE":return Object(o.a)(Object(o.a)({},e),{},{value:t.val});case"TOUCH":return Object(o.a)(Object(o.a)({},e),{},{isTouched:!0});default:return e}}),m=function(e){var t=Object(n.useReducer)(u,{value:e.value||0,isTouched:!1}),a=Object(r.a)(t,2),s=a[0],c=a[1],l=e.id,o=e.onInput,m=s.value;Object(n.useEffect)((function(){o(l,m)}),[l,m,o]);return i.a.createElement("div",{className:"input-container"},i.a.createElement("label",{htmlFor:e.id,className:"label m-b-5"},e.label),i.a.createElement("input",{className:"input",id:e.id,type:e.type,placeholder:e.placeholder,onChange:function(t){var a="number"===e.type&&t.target.value>0?parseInt(t.target.value):"";c({type:"CHANGE",val:a,validators:e.validators})},onBlur:function(){c({type:"TOUCH"})},value:s.value}))},d=(a(17),function(e){return i.a.createElement("button",{className:"button ".concat(e.className),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}),v=Object(n.createContext)({gameSettings:{},onStartNewGame:function(){},isSupermanMode:!1,isGameLost:!1,onRevealBombs:function(){}});function p(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var g,b=function(e,t,a){for(var n,i,s=a,c=[],r=0;r<t;r++){c.push([]);for(var l=0;l<e;l++)c[r][l]=!1}for(;s>0;)n=p(0,t-1),i=p(0,e-1),!0!==c[n][i]&&(c[n][i]=!0,s--);return c},f=function(e,t,a,n){var i=[];return e>0&&i.push([e-1,t]),e>0&&t<a-1&&i.push([e-1,t+1]),t<a-1&&i.push([e,t+1]),e<n-1&&t<a-1&&i.push([e+1,t+1]),e<n-1&&i.push([e+1,t]),e<n-1&&t>0&&i.push([e+1,t-1]),t>0&&i.push([e,t-1]),e>0&&t>0&&i.push([e-1,t-1]),i},h=(a(18),function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in"width"===t.inputId?g=t.value*e.inputs.height.value:"height"===t.inputId&&(g=t.value*e.inputs.width.value),"width"!==t.inputId&&"height"!==t.inputId||(e.inputs.mines.value<=g&&e.inputs.mines.value>=1?e.inputs.mines.isValid=!0:e.inputs.mines.isValid=!1),e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(o.a)(Object(o.a)({},e),{},{inputs:Object(o.a)(Object(o.a)({},e.inputs),{},Object(l.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});default:return e}}),E=function(){var e=Object(n.useContext)(v),t=Object(n.useReducer)(h,{inputs:{width:{value:12,isValid:!0},height:{value:8,isValid:!0},mines:{value:10,isValid:!0}},isValid:!0}),a=Object(r.a)(t,2),s=a[0],c=a[1],l=Object(n.useCallback)((function(e,t){c({type:"INPUT_CHANGE",value:t,isValid:o(e,t),inputId:e})}),[]),o=function(e,t){var a;switch(e){case"width":case"height":a=t>=1&&t<=300;break;case"mines":a=t>=1&&t<=g;break;default:return 0}return a};return i.a.createElement("div",{className:"game-settings p-x-20 p-y-20"},i.a.createElement("h1",{className:"game-settings-title m-t-0 m-b-10"},"Game Settings"),i.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault();var a=s.inputs.width.value,n=s.inputs.height.value,i=s.inputs.mines.value;e.onRevealBombs("SUPERMAN_MODE",!1),e.onRevealBombs("GAME_OVER",!1),e.onFirstMove(!1),e.onStartNewGame({width:a,height:n,mines:i,minesLocation:b(a,n,i)})}},i.a.createElement("div",{className:"input-contianer"},i.a.createElement(m,{id:"width",type:"number",label:"Board width",onInput:l,value:s.inputs.width.value}),!s.inputs.width.isValid&&i.a.createElement("p",{className:"error-text m-y-5"},"Please enter a number between ".concat(1," and ").concat(300))),i.a.createElement("div",{className:"input-contianer"},i.a.createElement(m,{id:"height",type:"number",label:"Board height",onInput:l,value:s.inputs.height.value}),!s.inputs.height.isValid&&i.a.createElement("p",{className:"error-text m-t-5"},"Please enter a number between ".concat(1," and ").concat(300))),i.a.createElement("div",{className:"input-contianer"},i.a.createElement(m,{id:"mines",type:"number",label:"Mines number",onInput:l,value:s.inputs.mines.value}),!s.inputs.mines.isValid&&s.inputs.width.isValid&&s.inputs.height.isValid&&i.a.createElement("p",{className:"error-text m-t-5"},g>1?"Please enter a number between ".concat(1," and ").concat(g):0===g?"":"Only 1 mine is possible")),i.a.createElement(d,{className:"success m-t-5",type:"submit",disabled:!s.isValid},"Start game")))},N=a(6),O=a.n(N),w=a(7),j=a.n(w),M=(a(19),function(){var e=Object(n.useContext)(v),t=e.isSupermanMode,a=e.onRevealBombs;return i.a.createElement("aside",{className:"sidebar"},i.a.createElement("section",{className:"logo p-x-5"},i.a.createElement("img",{src:O.a,alt:"Minesweeper logo",className:"m-r-5"}),i.a.createElement("h1",{className:"m-y-0"},"Minesweeper")),i.a.createElement(E,{className:"game-settings"}),i.a.createElement("section",{className:"more-actions p-b-10"},i.a.createElement("p",{className:"m-y-10"},"Need some help?"),i.a.createElement("div",{className:"superman-container"},i.a.createElement("img",{src:j.a,alt:"superman",className:"superman-button",onClick:function(){a("SUPERMAN_MODE",!t)}}),i.a.createElement("p",{className:"is-superman-mode m-y-0 ".concat(t?"is-superman-mode-on":"")},t?"On":"Off"))))}),F=(a(20),function(e){return i.a.createElement("div",{className:"card m-x-10"},i.a.createElement("p",{className:"card-content m-t-0 m-b-10"},e.content),i.a.createElement("h2",{className:"card-label m-y-0"},e.label))}),S=(a(21),function(){var e=Object(n.useContext)(v),t=e.isFirstMove,a=e.isGameLost,s=Object(n.useState)(0),c=Object(r.a)(s,2),l=c[0],o=c[1],u=function(e){o(e)};return Object(n.useEffect)((function(){var e=null;return t?e=setInterval((function(){u(l+1)}),1e3):!1===t&&0!==l&&(clearInterval(e),u(0)),!0===a&&(u(l),clearInterval(e)),function(){return clearInterval(e)}}),[t,a,l]),i.a.createElement(F,{label:"Time (s)",content:l})}),R=(a(22),function(e){return i.a.createElement("div",{className:"score-panel"},i.a.createElement(S,{isFirstMove:e.isFirstMove}),i.a.createElement(F,{label:"Steps",content:e.steps}),i.a.createElement(F,{label:"Remaining flags",content:e.remainingFlags}))}),y=a(8),C=a.n(y),G=a(9),V=a.n(G),A=(a(23),function(e){var t=Object(n.useContext)(v),a=t.isSupermanMode,s=t.isGameLost;return i.a.createElement("div",{className:"cell ".concat(e.isRevealed&&"is-revealed"),onClick:function(t){var a=!!t.shiftKey;e.onCellEvent(e.row,e.col,a)}},e.isFlagged?i.a.createElement("img",{src:C.a,alt:"Flag"}):e.minedNeighboursAmount>0&&e.isRevealed?i.a.createElement("span",{className:"mined-neighbours mined-neighbours-".concat(e.minedNeighboursAmount)},e.minedNeighboursAmount):"",a&&e.isMined||s&&e.isMined?i.a.createElement("img",{src:V.a,alt:"Flag"}):"")});function x(e,t,a){this.row=e,this.col=t,this.isMined=a,this.minedNeighboursAmount=0,this.isFlagged=!1,this.isRevealed=!1}a(24);var I,k=function(e){var t=Object(n.useContext)(v),a=t.isGameLost,s=t.isFirstMove,c=t.onFirstMove,l=Object(n.useState)([]),o=Object(r.a)(l,2),u=o[0],m=o[1],d=e.gameSettings,p=d.width,g=d.height,b=d.minesLocation,h=Object(n.useCallback)((function(e,t,a){I=0;for(var n=[],i=0;i<t;i++){n.push([]);for(var s=0;s<e;s++){var c=new x(i,s,a[i][s]);n[i][s]=c}}return m(n),n}),[]);Object(n.useEffect)((function(){h(p,g,b)}),[p,g,b,h]);var E=function(t,n,i){if(!1===s&&c(!0),!0!==a){var r=u;!0===i?r=N(u,t,n):!1===u[t][n].isFlagged&&!1===u[t][n].isRevealed&&(r=O(u,t,n)),m(r)}else e.onGameOver()},N=function(t,a,n){var i=t;return!0===t[a][n].isFlagged?(!0===t[a][n].isMined&&(I-=1),i[a][n].isFlagged=!t[a][n].isFlagged,e.onFlagEvent(-1)):(0===e.remainingFlags?e.onFlagEvent(0):e.remainingFlags>0&&!1===t[a][n].isRevealed&&(i[a][n].isFlagged=!t[a][n].isFlagged,e.onFlagEvent(1)),!0===t[a][n].isMined&&!0===t[a][n].isFlagged&&(I+=1)===e.gameSettings.mines&&e.onGameWin()),i},O=function(t,a,n){var i=t;if(!0===t[a][n].isMined)e.onGameOver();else{var s=j(a,n);!1===i[a][n].isFlagged&&(i[a][n].isRevealed=!0),s>0?i[a][n].minedNeighboursAmount=s:i=w(t,a,n),e.onStepEvent()}return i},w=function(e,t,a){for(var n=e,i=[n[t][a]],s=function(){var t=i.shift();!1===n[t.row][t.col].isFlagged&&(n[t.row][t.col].isRevealed=!0);var a=f(t.row,t.col,p,g),s=void 0,c=void 0,r=void 0;a.forEach((function(t){s=t[0],c=t[1],r=j(s,c),!0!==n[s][c].isRevealed&&0===r&&!1===n[s][c].isFlagged?i.push(e[s][c]):n[s][c].minedNeighboursAmount=r,!1===n[s][c].isFlagged&&(n[s][c].isRevealed=!0)}))};i.length>0;)s();return n},j=function(e,t){var a,n,i=f(e,t,p,g),s=0;i.length>0&&i.forEach((function(e){a=e[0],n=e[1],!0===u[a][n].isMined&&s++}));return s};return i.a.createElement("div",{className:"board-wrapper m-b-20"},i.a.createElement("div",{className:"board m-auto"},u.map((function(e,t){return i.a.createElement("div",{className:"board-row",key:t},e.map((function(e,a){return i.a.createElement(A,{className:"cell",key:"".concat(t,"-").concat(a),row:t,col:a,isMined:e.isMined,isFlagged:e.isFlagged,isRevealed:e.isRevealed,minedNeighboursAmount:e.minedNeighboursAmount,onCellEvent:E})})))}))))},B=(a(25),function(){var e=Object(n.useContext)(v),t=e.gameSettings,a=e.onRevealBombs,s=e.onStartNewGame,c=e.onFirstMove;Object(n.useEffect)((function(){m(0),f(t.mines)}),[t]);var l=Object(n.useState)(0),o=Object(r.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(t.mines),p=Object(r.a)(d,2),g=p[0],f=p[1],h=function(){var e=t.width,n=t.height,i=t.mines;s({width:e,height:n,mines:i,minesLocation:b(e,n,i)}),a("SUPERMAN_MODE",!1),a("GAME_OVER",!1),c(!1)};return i.a.createElement("div",{className:"game-container"},i.a.createElement(R,{className:"score-panel",steps:u,remainingFlags:g}),i.a.createElement(k,{gameSettings:t,onStepEvent:function(){m(u+1)},onFlagEvent:function(e){0===g&&0===e?alert("\ud83d\ude14 Oh snap, You ran out of flags!"):f(g-e)},onGameOver:function(){alert("Game over... \ud83d\ude13"),a("GAME_OVER",!0)},onGameWin:function(){alert("\u2728 Yay! We have a winner! \u2728"),h()},remainingFlags:g}))}),P=(a(26),function(){return i.a.createElement("main",{className:"main p-x-20"},i.a.createElement(B,null))});a(27);var _=function(){var e=Object(n.useState)({width:12,height:8,mines:10,minesLocation:b(12,8,10)}),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useCallback)((function(e){s(e)}),[]),l=Object(n.useState)(!1),o=Object(r.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(!1),p=Object(r.a)(d,2),g=p[0],f=p[1],h=Object(n.useState)(!1),E=Object(r.a)(h,2),N=E[0],O=E[1],w=Object(n.useCallback)((function(e,t){switch(e){case"GAME_OVER":f(t);break;case"SUPERMAN_MODE":m(t)}}),[]);return i.a.createElement(v.Provider,{value:{gameSettings:a,isSupermanMode:u,isGameLost:g,isFirstMove:N,onStartNewGame:c,onRevealBombs:w,onFirstMove:function(e){O(e)}}},i.a.createElement("div",{className:"app"},i.a.createElement(M,null),i.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.19bc12ec.chunk.js.map